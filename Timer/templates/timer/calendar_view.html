<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Platform Calendar</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            background-image: url('/static/images/calender.jpg');
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .calendar {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.2); /* Transparent white */
            padding: 25px;
            max-width: 800px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        .calendar-header h2 {
            margin: 0;
            font-size: 3em;
            color: black;
            text-align: center;
            flex-grow: 1;
        }
        .calendar-header button {
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            transition: background 0.3s ease-in-out;
            box-shadow: 0 3px 10px rgba(0, 123, 255, 0.3);
        }
        .calendar-header button:hover {
            background: #0056b3;
            box-shadow: 0 5px 20px rgba(0, 123, 255, 0.4);
        }
        .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            width: 100%;
            grid-template-rows: repeat(6, auto);
        }
        .day {
            background: #ffffff;
            color: #333;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            transition: background 0.3s, transform 0.3s;
            cursor: pointer;
            position: relative; /* Allow positioning of event/reminder */
        }
        .day:hover {
            background: #e9ecef;
            transform: translateY(-5px);
        }
        .current-day {
            background: #007bff;
            color: white;
            border-radius: 10px;
            font-weight: bold;
        }
        .event, .reminder {
            background: #ff6b6b;
            color: white;
            border-radius: 5px;
            padding: 5px;
            font-size: 0.8em;
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            text-align: left;
        }
        .reminder {
            background: #ffa502;
        }
        #eventModal, #reminderModal, #detailModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        #modalContent {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 350px;
        }
        #closeModal, #closeReminderModal, #closeDetailModal {
            cursor: pointer;
            color: #007bff;
            float: right;
            font-size: 1.5em;
        }
        .input {
            margin-bottom: 10px;
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
        }
        #addEvent, #addReminder {
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 12px;
            cursor: pointer;
            width: 100%;
            font-size: 1em;
            transition: background 0.3s;
        }
        #addEvent:hover, #addReminder:hover {
            background: #218838;
        }
    </style>
</head>
<body>
    <div class="calendar">
        <h2>Study Platform Calendar</h2>
        <div class="calendar-header">
            <button id="prev">⬅️ Previous</button>
            <h2 id="monthYear"></h2>
            <button id="next">Next ➡️</button>
        </div>
        <div class="days" id="days"></div>
    </div>

    <!-- Event Modal -->
    <div id="eventModal">
        <div id="modalContent">
            <span id="closeModal">&times;</span>
            <h3>Add Event</h3>
            <input type="text" id="eventInput" class="input" placeholder="Event name (e.g., Ace that exam!)" />
            <button id="addEvent">Save Event</button>
        </div>
    </div>

    <!-- Reminder Modal -->
    <div id="reminderModal">
        <div id="modalContent">
            <span id="closeReminderModal">&times;</span>
            <h3>Add Reminder</h3>
            <input type="text" id="reminderInput" class="input" placeholder="Reminder (e.g., Don’t forget the coffee!)" />
            <button id="addReminder">Save Reminder</button>
        </div>
    </div>

    <!-- Details Modal -->
    <div id="detailModal">
        <div id="modalContent">
            <span id="closeDetailModal">&times;</span>
            <h3>Details</h3>
            <p id="detailsContent"></p>
        </div>
    </div>

    <script>
        const monthYear = document.getElementById('monthYear');
        const daysContainer = document.getElementById('days');
        const prevButton = document.getElementById('prev');
        const nextButton = document.getElementById('next');
        const eventModal = document.getElementById('eventModal');
        const closeModal = document.getElementById('closeModal');
        const eventInput = document.getElementById('eventInput');
        const addEventButton = document.getElementById('addEvent');
        const reminderModal = document.getElementById('reminderModal');
        const closeReminderModal = document.getElementById('closeReminderModal');
        const reminderInput = document.getElementById('reminderInput');
        const addReminderButton = document.getElementById('addReminder');
        const detailModal = document.getElementById('detailModal');
        const closeDetailModal = document.getElementById('closeDetailModal');
        const detailsContent = document.getElementById('detailsContent');

        let currentDate = new Date();
        let events = {};
        let reminders = {};

        function renderCalendar(date) {
            daysContainer.innerHTML = '';
            const year = date.getFullYear();
            const month = date.getMonth();

            monthYear.textContent = date.toLocaleString('default', { month: 'long', year: 'numeric' });

            const firstDayOfMonth = new Date(year, month, 1);
            const lastDayOfMonth = new Date(year, month + 1, 0);
            const totalDays = lastDayOfMonth.getDate();
            const startingDay = firstDayOfMonth.getDay();

            for (let i = 0; i < startingDay; i++) {
                const emptyDiv = document.createElement('div');
                daysContainer.appendChild(emptyDiv);
            }

            for (let day = 1; day <= totalDays; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.textContent = day;
                dayDiv.className = 'day';
                dayDiv.setAttribute('data-date', `${year}-${month + 1}-${day}`);

                if (day === new Date().getDate() && month === new Date().getMonth() && year === new Date().getFullYear()) {
                    dayDiv.classList.add('current-day');
                }

                dayDiv.addEventListener('click', openEventModal);
                dayDiv.addEventListener('contextmenu', (event) => {
                    event.preventDefault();
                    openReminderModal(event);
                });
                dayDiv.addEventListener('dblclick', showDetails);

                const fullDateKey = `${year}-${month + 1}-${day}`;
                if (events[fullDateKey]) {
                    const eventDiv = document.createElement('div');
                    eventDiv.textContent = events[fullDateKey];
                    eventDiv.className = 'event';
                    dayDiv.appendChild(eventDiv);
                }

                if (reminders[fullDateKey]) {
                    const reminderDiv = document.createElement('div');
                    reminderDiv.textContent = reminders[fullDateKey];
                    reminderDiv.className = 'reminder';
                    dayDiv.appendChild(reminderDiv);
                }

                daysContainer.appendChild(dayDiv);
            }
        }

        function openEventModal(event) {
            eventModal.style.display = 'flex';
            event.currentTarget.setAttribute('data-event-modal', 'true');
        }

        function openReminderModal(event) {
            reminderModal.style.display = 'flex';
            reminderModal.setAttribute('data-date', event.currentTarget.getAttribute('data-date'));
        }

        function showDetails(event) {
            const day = event.currentTarget.getAttribute('data-date');
            const fullDateKey = day;
            const eventDetails = events[fullDateKey] || 'No events today!';
            const reminderDetails = reminders[fullDateKey] || 'No reminders today!';

            detailsContent.innerHTML = `<strong>Date:</strong> ${day}<br>
                                         <strong>Event:</strong> ${eventDetails}<br>
                                         <strong>Reminder:</strong> ${reminderDetails}<br>`;
            detailModal.style.display = 'flex';
        }

        prevButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar(currentDate);
        });

        nextButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar(currentDate);
        });

        closeModal.addEventListener('click', () => {
            eventModal.style.display = 'none';
            const eventDay = document.querySelector('.day[data-event-modal="true"]');
            if (eventDay) {
                const date = eventDay.getAttribute('data-date');
                events[date] = eventInput.value || 'Unnamed Event';
                eventInput.value = '';
                renderCalendar(currentDate);
                eventDay.removeAttribute('data-event-modal');
            }
        });

        closeReminderModal.addEventListener('click', () => {
            reminderModal.style.display = 'none';
            const date = reminderModal.getAttribute('data-date');
            reminders[date] = reminderInput.value || 'Mysterious Reminder';
            reminderInput.value = '';
            renderCalendar(currentDate);
        });

        closeDetailModal.addEventListener('click', () => {
            detailModal.style.display = 'none';
        });

        addEventButton.addEventListener('click', closeModal);
        addReminderButton.addEventListener('click', closeReminderModal);

        // Initial render
        renderCalendar(currentDate);
    </script>
</body>
</html>
